# Swagger LintDiff validation for certain models

## question 
I have the below PR [adding shared limit typespec by parthshah2305 · Pull Request #24115 · Azure/azure-rest-api-specs-pr](https://github.com/Azure/azure-rest-api-specs-pr/pull/24115) where some of the LintDiff validations are failing with the exception 
``` 
  Violation: file:///home/runner/work/azure-rest-api-specs-pr/azure-rest-api-specs-pr/after/specification/limit/resource-manager/Microsoft.Limit/Limit/stable/2025-08-15/Limit.json:578
    Level: error
    Code: RequiredPropertiesMissingInResourceModel
    Message: Model definition 'SharingDetail' must have the properties 'name', 'id' and 'type' in its hierarchy and these properties must be marked as readonly.
```

This particular model is defined as follows - 

```
model SharingDetail {
  role: SharingRole;
  sharedLimits?: QuotaLimitProperties[];
  guestSubscriptions?: string[];
  host?: string;
}
```
 
Is it possible have a suppression for this validation? If so, how?

## answer
the link for lintdiff suppressions:
 
https://github.com/Azure/azure-rest-api-specs/wiki/Swagger-LintDiff#adding-scoped-suppressions
 
you probably want to fix this in your spec, not suppress the error
 
You need to fix check "TypeSpec Validation" in your PR, before other check results will even be valid.  This is documented in the "next steps to merge" comment in your PR.

# Model validations are failing although am referring from common-types

## question 
1. I have reused the model Private endpoint connection resource from the commonTypes/v5. However the model validation is failing. In example PrivateEndpointConnections_ListByCodeSigningAccount, its giving the below errors. In the PrivateEndpointConnection tsp file, I have kept the resource name as is and havent renamed, would this cause any issue? Would there be any problem while updating it from Rpaas? Have observed some RPs have leveraged from commonTypes but renamed as PrivateEndpointConnectionResource in their tsp file.
 
2. Avocado error: I have removed an API revokeCertificate and added a new api revokeCertificates which takes an array. 
 
How do I fix both errors?
 
 [Added private endpoint connection, bulk revocation and c2pa certificate type by amritas · Pull Requ…](https://github.com/Azure/azure-rest-api-specs-pr/pull/24553)
 
Model validation Error - Additional properties not allowed: groupIds, privateLinkServiceConnectionState,privateEndpoint,provisioningState
 
PEC contract - 
```
namespace Microsoft.CodeSigning;

@doc("Private endpoint connection resource.")
@added(Versions.v2025_09_15_preview)
@parentResource(CodeSigningAccount)
model PrivateEndpointConnection
    is ProxyResource<PrivateEndpointConnectionProperties> {
    ...PrivateEndpointConnectionParameter;
}

@added(Versions.v2025_09_15_preview)
@armResourceOperations(PrivateEndpointConnection)
interface PrivateEndpointConnections {
  /** Get a specific private connection */
  get is ArmResourceRead<PrivateEndpointConnection>;

  /** Create a Private endpoint connection */
  create is ArmResourceCreateOrReplaceAsync<PrivateEndpointConnection>;

  /** Delete the private endpoint connection */
  delete is ArmResourceDeleteWithoutOkAsync<PrivateEndpointConnection>;

  /** List private endpoint connections on the given resource */
  list is ArmResourceListByParent<PrivateEndpointConnection>;
}

@added(Versions.v2025_09_15_preview)
@parentResource(CodeSigningAccount)
model PrivateLink is ProxyResource<PrivateLinkResourceProperties> {
  ...PrivateLinkResourceParameter;
}
```
 updated the operationId and it worked. Let me know if the PrivateEndpointConnection should be a customized name or can retain same name as in commonTypes?
 Would this be guided by the reviewer?

## answer
Looking at your PR, it seems that the avocado error is the only remaining one - this is just reporting that you have removed an API.  If you do not need to continue supporting the older preview, you might consider removing it,  otherwise, this is an error you can safely suppress (https://aka.ms/ci-fix is a great link to remember, as it has links to all kinds of useful info about ci errors, including a link to the suppression guides).
 
For PrivateEndpointConnections, RPs have done both, as the name of the private endpoint connection type doesn't really matter to the API, however, there is a new template that greatly simplifies adding private endpoint connection operations to any resourc,e see: 
[typespec-azure/packages/samples/specs/resource-manager/resource-types/private-endpoints/private-end…](https://github.com/Azure/typespec-azure/blob/main/packages/samples/specs/resource-manager/resource-types/private-endpoints/private-endpoints.tsp#L69-L94)
```
model PrivateEndpointConnection is PrivateEndpointConnectionResource;
alias PrivateEndpointOperations = PrivateEndpoints<PrivateEndpointConnection>;

@armResourceOperations
interface Employees {
  get is ArmResourceRead<Employee>;
  createOrUpdate is ArmResourceCreateOrReplaceAsync<Employee>;
  update is ArmCustomPatchSync<
    Employee,
    Azure.ResourceManager.Foundations.ResourceUpdateModel<Employee, EmployeeProperties>
  >;
  delete is ArmResourceDeleteSync<Employee>;
  listByResourceGroup is ArmResourceListByParent<Employee>;
  listBySubscription is ArmListBySubscription<Employee>;
  /** A sample resource action that move employee to different location */
  move is ArmResourceActionSync<Employee, MoveRequest, MoveResponse>;

  /** A sample HEAD operation to check resource existence */
  checkExistence is ArmResourceCheckExistence<Employee>;

  getPrivateEndpointConnection is PrivateEndpointOperations.Read<Employee>;
  createOrUpdatePrivateEndpointConnection is PrivateEndpointOperations.CreateOrUpdateAsync<Employee>;
  updatePrivateEndpointConnection is PrivateEndpointOperations.CustomPatchAsync<Employee>;
  deletePrivateEndpointConnection is PrivateEndpointOperations.DeleteAsync<Employee>;
  listPrivateEndpointConnections is PrivateEndpointOperations.ListByParent<Employee>;
}
```
See here for the Avocado error.  We need to find a better way to handle intentionally removed APIs in Avocado.
 
https://github.com/Azure/azure-rest-api-specs/wiki/Swagger-Avocado#known-issues

# Design question about suppression rules

## question 
Hi team,
 
We're working to put together a TypeSpec definitions package for OpenAI API surface.
This will then get consumed by teams authoring Azure APIs. As such, they have the Azure linting in place (naming conventions and whatnot).
 
We wanted to know whether definitions can also come with suppressions (not inline, as this definition is auto-importer on a regular basis), which would apply ONLY to the definitions we share, not to the rest of the consumer's project?
 
Thanks!

## answer
suppression can only be provided inline for now. Linter rules can be disabled globally but that would apply to the whole project, can't filter by files